<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Gun Violence</title>
		
		<!--AFrame-->
		<script src="https://rawgit.com/aframevr/aframe/master/dist/aframe.min.js"></script>
		<!--Stylesheet-->
		<link rel="stylesheet" type="text/css" href="css/stylesheet.css">
		<!--JQuery-->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
		<!--SocketIO-->
		<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
	</head>
	<body>
		<div class="topbar">
			<div id="location">
				<span>Atlanta, Georgia</span>
			</div>
			<div id="topdata">
				<span id="incidents">0 incidents,</span>
				<span id="injuries">0 injuries,</span>
				<span id="deaths">0 deaths,</span>
				from guns in the last 72 hours
			</div>
			<a href="about.html"><div id="info">More Infromation</div></a>
		</div>
		<div class="vrwrapper">
			<div id="left">
				<ul id="llist">
					
				</ul> 
			</div>
			<a-scene embedded>
				<a-assets>
					<a-asset-item id="gun-dae" src="assets/gunColladaVersion.dae"></a-asset-item>
				</a-assets>
				<!--Gun-->
				<a-collada-model id="gun"
									collada-model="#gun-dae"
									position="0.00 1.62 1.88"
									rotation="-90 -90 178"
									scale="0.10 0.10 0.10"		 
									sound="src: url(assets/Gunshot.mp3); on: shotsound"
									material="src: url(assets/handgun-texture.png)">
										<a-animation begin="shot"
												attribute="rotation"
												from="-90 -90 178"
												to="-60 -90 178"
												dur="500"
												easing="ease-out-back"
												direction="alternate"
												repeat="1"></a-animation>
				</a-collada-model>
				<a-sky color="#EF0202"></a-sky>
				<a-camera position="0 0 2.5" look-controls="enabled: false" wasd-controls="enabled: false"></a-camera>
			</a-scene>
			<div id="right">
				<ul id="rlist">
					
				</ul> 
			</div>
		</div>
		<script type="text/javascript" src="js/Generate.js"></script>
		<script>
			//var socket = io.connect("http://6310.lmc.gatech.edu:6010");
			var socket = io.connect();
			socket.on('returndata', function(data) {
				getData(data);
  		});
			socket.on('passbackLoc', function(results) {
				parseLoc(results);
  		});
			socket.on('returntabledata', function(table) {
				console.log(table.data[0][0].Operations);
				console.log("this");
  		});
			$(document).ready(function() {
				$("aframe").css("border-radius", "50%");
			});
			if (!navigator.geolocation) { //
				console.log("Geolocation is not supported by your browser");
    	}
			else {
				navigator.geolocation.getCurrentPosition(success, error);
			}

			function success(position) { //the code inside this function is mine though, because it interacts with my functions
					var lat = position.coords.latitude;
					var lng = position.coords.longitude;
					console.log('Latitude is ' + lat + ' Longitude is ' + lng)
					//output.innerHTML = 'Latitude is ' + gps.lat + ' Longitude is ' + gps.lng;
					socket.emit('passLoc', {
						latitude: lat,
						longitude: lng
					});
			};

			function error(error) {
					switch(error.code) {
					case error.PERMISSION_DENIED:
							//output.innerHTML = "User denied the request for Geolocation."
							console.log("User denied the request for Geolocation.");
							break;
					case error.POSITION_UNAVAILABLE:
							//output.innerHTML = "Location information is unavailable."
							console.log("Location information is unavailable.");
							break;
					case error.TIMEOUT:
							//output.innerHTML = "The request to get user location timed out."
							console.log("The request to get user location timed out.");
							break;
					case error.UNKNOWN_ERROR:
							//output.innerHTML = "An unknown error occurred."
							console.log("An unknown error occurred.");
							break;
					}
			};
		</script>
	</body>
</html>
